{% extends 'base.html' %}

{% block meta %}
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Football timetravelling.">
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block title %}
<title>Tactification</title>
{% endblock %}

{% block content %}
{% set featured = posts[0] if posts else None %}

<section class="hero-pitch mt-3 mb-5">
  <div class="hero-overlay">
    <div class="d-flex flex-wrap align-items-center justify-content-between mb-3">
      <div class="match-chip">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><path d="M12 2a9.9 9.9 0 00-4 7.9c0 2.6 1.2 4.9 3 6.5a9.9 9.9 0 004-7.9c0-2.6-1.2-4.9-3-6.5z" fill="currentColor" opacity="0.2"/></svg>
        Football timetravelling
      </div>
    </div>

    <div class="row align-items-center g-4">
      <div class="col-md-7 position-relative">
        {% if featured %}
        <a class="stretched-link hero-link" href="{{ url_for('main.post', id=featured.id, header=featured.header) }}"></a>
        {% endif %}
        {% if featured %}
        <div class="card border-0 bg-white text-dark p-3 mb-0" style="border-radius:14px;">
          <h5 class="fw-bold mb-2">{{ featured.header }}</h5>
          <div class="d-flex align-items-center text-muted small">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-2"><path d="M12 3v18m9-9H3" stroke="#0b1e3b" stroke-width="2" stroke-linecap="round"/></svg>
            {{ featured.post_date_in_isoformat() }}
          </div>
        </div>
        {% endif %}
      </div>
      <div class="col-md-5">
        {% if featured and featured.url %}
        <a class="card border-0 overflow-hidden d-block" style="border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,0.25);" href="{{ url_for('main.post', id=featured.id, header=featured.header) }}">
          <img src="{{ featured.url }}" alt="{{ featured.header }}" class="w-100" style="object-fit:cover; height:260px;">
        </a>
        {% else %}
        <div class="card border-0 bg-white text-dark p-3" style="border-radius:14px;">
          <h5 class="fw-bold mb-2">Fresh tactical breakdowns every week</h5>
          <div class="text-muted small">From the archives of European nights to todayâ€™s high lines, we decode the patterns and spaces that decide matches.</div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<div class="d-flex align-items-center mb-3">
  <span class="divider-title">Recent breakdowns</span>
  <div class="flex-grow-1 ms-3" style="height:2px; background: linear-gradient(90deg, #0a8c4a, rgba(10,140,74,0));"></div>
</div>

{% if posts|length > 1 %}
  {% set recent_posts = posts[1:] %}
{% else %}
  {% set recent_posts = posts %}
{% endif %}

<div class="row g-4 mb-4">
  {% for post in recent_posts %}
  <div class="col-md-4">
    <a class="card card-sporty text-decoration-none d-block" href="{{ url_for('main.post', id=post.id, header=post.header) }}">
      {% if post.url %}
      <img src="{{ post.url }}" class="card-img-top" alt="{{ post.header }} thumbnail">
      {% endif %}
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2 text-white-50">
          <span class="badge bg-success">{{ post.post_date_in_isoformat() }}</span>
          <span class="small">Tap to read</span>
        </div>
        <h5 class="card-title text-white mb-0">{{ post.header }}</h5>
      </div>
    </a>
  </div>
  {% endfor %}
</div>

<!-- Pagination controls -->
<div class="d-flex justify-content-center align-items-center my-4">
  {% if pagination.has_prev %}
    <a href="{{ url_for('main.index', page=pagination.prev_num) }}" class="btn btn-outline-dark me-2">Prev</a>
  {% endif %}

  {% if pagination.has_next %}
    <a href="{{ url_for('main.index', page=pagination.next_num) }}" class="btn btn-outline-dark ms-2">Next</a>
  {% endif %}
</div>

{% endblock %}
